<!DOCTYPE html>
<html ng-app="autoApp">

<head>
<meta charset=utf-8 />
<meta name="viewport" content="width=device-width">

<title>計算機</title>
	<link rel="stylesheet" type="text/css" class="ui" href="../stylesheets/semantic.min.css">
	<link rel="stylesheet" type="text/css" class="ui" href="../stylesheets/jquery-ui.css" />
	<link rel="stylesheet" type="text/css" class="ui" href="../stylesheets/fmDoc.css" />
	<script src="../javascripts/jquery-1.10.2.js"></script>
	<script src="../javascripts/jquery-ui.js"></script>
	<script src="../javascripts/underscore-min.js"></script>
	<script src="../javascripts/backbone-min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-i18n/1.0.7/angular-locale_zh-tw.js"></script>


</head>
  
<body>
<title>test</title>

<style type="text/css">

body {
  background: rgba(200,255,255,1);
}

table {
  border: 5px ridge;
  border-collapse: collapse;
  width: 75%;
}

tr, td, th { 
    border: 3px ridge;
}

td { 
    width: 33%;
}


input {
  font-size: 1.2rem;
}

</style>

</head>

<body>

<p><span>^__^</span></p>


<div ng-controller="Ctrl">

  <h1>Hello  {{yourName || 'everyone'}}!</h1>  

      <label>輸入你的姓名，Angular會跟你打招呼</label>  
      <input type="text" ng-model="yourName">  

      <br/>

      <table>

      <tr>
        <th><input type="number" ng-model = "s1"></input></th>
        <th><input type="number" ng-model = "s2"></input></th>
        <th />
      </tr>

      <tr><td> {{ s1 }}的因數有 {{ s1 | fact }} </td>
          <td> {{ s2 }} 的因數有 {{ s2 | fact }} </td>
          <td>{{s1 | arith}} + {{s2 | arith}} = {{ s1 + s2 | arith}}</td>
      </tr>


      <tr><td> {{ s1 }}的倍數有 {{ s1 | mul }} </td>
          <td> {{ s2 }} 的倍數有 {{ s2 | mul }} </td>
          <td>{{s1 | arith}} - {{s2 | arith}} = {{ s1 - s2 | arith}}</td>
      </tr>
      
      <tr><td /><td /><td>{{s1 | arith}} * {{s2 | arith}} = {{ s1 * s2 | arith}}</td></tr>
      
      <tr><td /><td /><td>{{s1 | arith}} / {{s2 | arith}} = {{ {a:s1, b:s2} | div:this}}</td>
      </tr>
      
      <tr><td /><td /><td>{{s1 | arith}} <sup> {{s2 | arith}} </sup> = {{ {a:s1, t:s2} | powM }} = {{ {a:s1, t:s2} | pow }}</td></tr>


      <tr><td /><td /><td>{{s2 | arith}} <sup> {{s1 | arith}} </sup> = {{ {a:s2, t:s1} | powM }} = {{ {a:s2, t:s1} | pow }}</td></tr>

      <tr><td /><td /><td> {{ s1 }}, {{ s2 }} 的最大公因數： {{ {a:s1, b:s2} | gcd }}</td></tr>

      <tr><td /><td /><td> {{ s1 }}, {{ s2 }} 的最小公倍數： {{ {a:s1, b:s2} | lcm }}</td></tr>


      </table>

</div>



<script type="text/javascript">

var autoApp = angular.module('autoApp', ['autoFilters']);

function Ctrl($scope) {
  $scope.yourName = 'Bestian';
  $scope.numbers = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17];
  $scope.numbers0 = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17];
  $scope.s1 = 7;
  $scope.s2 = 3;
}

angular.module('autoFilters', []).filter('arith', function() {
    return function(input) {
      return input ? input : 0;
    };
  }).filter(('div'), function(){
    return function(input){
		var ans = 0;
		var s1 = input.a;
		var s2 = input.b;
		while ((Math.abs(s1) >= Math.abs(s2)) && s2) {
		 console.log(s1 + '/' + s2);
		 if (s1 > 0 ) {
		    s1 -= Math.abs(s2);
		    ans += s2 / Math.abs(s2);
		 }
		 else if (s1 < 0 ) {
		    s1 += Math.abs(s2);
		    ans -= s2 / Math.abs(s2);
		 }         
		}
		if (s2 == 0) {
		if (s1 > 0) return Infinity;
		if (s1 < 0) return Infinity;
		if (s1 == 0) return NaN;
		}
		else {
		if (!ans) ans = '';
		return s1 ? ans + ' ' + s1 + '/' + s2 : ans;
		}
  	};
}).filter(('pow'), function(){
    return function(input){
       return Math.pow(input.a, input.t);
  	};
}).filter(('powM'), function(){
	return function(input){
		var list = []; var ans;
		for (var i = 0; i < Math.abs(input.t); i++) {
			list.push(input.a);
	    };
	    ans = list.length < 10 ? list.join('*'): list.length + '個' + input.a + '相乘';
	    return (input.a < 0) ? '1 / (' + ans + ')' : ans;
	};
}).filter(('fact'), function(){
     return function(input){
        var n = Math.abs(input);
        var facts = [];
        for (var i = 1; i <= n; i++) {
          if (!(n % i)) facts.push(i);        

        };
        return facts.join();
  };
}).filter(('mul'), function(){
     return function(input){
        var muls = [];
        for (var i = -2; i <= 5; i++) {
           muls.push(i * input);        
        };
        return '...'+muls.join()+'...';
  };
}).filter(('gcd'), function(){
     return function(input){

        a = Math.abs(input.a);
        b = Math.abs(input.b);
        
        while (b * a) {          
          a > b ? a = a % b : b = b % a;
        }

        return (Math.max(a,b) == 1) ? "1。("+input.a+"和"+input.b+"互質)" :  Math.max(a,b);

  };
}).filter(('lcm'), function(){
     return function(input){

        a = Math.abs(input.a);
        b = Math.abs(input.b);
        
        while (b * a) {          
          a > b ? a = a % b : b = b % a;
        }

        return input.a * input.b / Math.max(a,b);

  };
});



</script>


</body>




<script type="text/javascript">

		var primesBelowSqrt = function(n) {
			var primes = [2];
			for (var i = 2; i < Math.sqrt(n); i++) {
				var good = 1;
			 	for (var j = 0; j < primes.length; j++) {
			 		if (i % primes[j] == 0) good = 0;
			 	};
			 	if (good == 1) primes.push(i);
			};
		}

		var primeFactorize = function(n) {
			var ans = [];
			var primes = primesBelowSqrt(n);
			while(n > 1) {
				for (var i = 0; i < primes.length; i++) {
					if (n % primes[i] == 0) {
						n = n / primes[i];
						ans[primes[i]] += 1;
					}
				};
			}
			return ans;
		}

		var maxs = function(list) {
			var ans = list[0];
			for (var i = 0; i < list.length; i++) {
				ans = Math.max(ans, list[i])
			};
			return ans;
		}

		var fromPrimeFact = function(list){
			var ans = 1;
			for (var i = 0; i < list.length; i++) {
				if (i > 0) ans = ans * i ** list[i];
			};
			return ans;
		}

		var lcm = function(list){
			var ans = [];
			var factList = [];
			var factLengList = [];
			for (var i = 0; i < list.length; i++) {
				factList[i] = primeFactorize(list[i]);
				factLengList[i] = primeFactorize(list[i]).length;
			};

			var maxLeng = maxs(factLengList);

			for (var i = 0; i < maxLeng.length; i++) {
				var exponent = 0;
				var expList = [];
				for (var j = 0; j < factList.length; j++) {
					expList.psuh(factList[j]);
				};
				exponent = maxs(expList);
				ans[i] = exponent;
			};

			return fromPrimeFact(ans);

		}

		var gcds = function(list) {
			var ans = list[0];

				var gcd = function(a, b) {
				    if ( ! b) {
				        return a;
				    }

				    return gcd(b, a % b);
				};

			for (var i = 0; i < list.length; i++) {
				ans = gcd(ans,list[i])
			};
			return ans;
		};


	var Ctrl = function($scope){
		$scope.skills = [];
	 
		$scope.skill = '';
		$scope.submit = function(){
			if(!!$scope.skill) {
				$scope.skills.push($scope.skill);
				$scope.gcd = gcds($scope.skills);
			}
			$scope.skill = '';
		}


	};

	var FriendsCtrl = function($scope){
		$scope.friends = [	{ name: '男丁格爾', 	age: 18 }, 
							{ name: 'jelly', 	age: 16 }, 
							{ name: '梅干桑', 	age: 30 }, 
							{ name: '莫希爾', 	age: 31 }
			];
	};
</script>
